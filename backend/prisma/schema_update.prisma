// Add these models to the existing schema.prisma file

model atp_document_templates {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  template_code   String    @unique @db.VarChar(50)
  template_name   String    @db.VarChar(200)
  category        String    @db.VarChar(50)
  version         String?   @default("1.0") @db.VarChar(20)
  is_active       Boolean?  @default(true)
  form_schema     Json
  checklist_items Json?     @default("[]")
  workflow_config Json?     @default("{}")
  created_by      String?   @db.VarChar(100)
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  updated_at      DateTime? @default(now()) @db.Timestamp(6)

  @@index([category], map: "idx_atp_templates_category")
  @@index([is_active], map: "idx_atp_templates_active")
}

model atp_document_attachments {
  id            String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  atp_id        String?        @db.Uuid
  file_name     String         @db.VarChar(255)
  original_name String         @db.VarChar(255)
  file_path     String         @db.VarChar(500)
  file_size     Int?
  mime_type     String?        @db.VarChar(100)
  file_type     String?        @db.VarChar(50)
  uploaded_by   String?        @db.VarChar(100)
  uploaded_at   DateTime?      @default(now()) @db.Timestamp(6)
  is_active     Boolean?       @default(true)
  atp_documents atp_documents? @relation(fields: [atp_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([atp_id], map: "idx_atp_attachments_atp")
  @@index([file_type], map: "idx_atp_attachments_type")
}

// Also add these fields to existing atp_documents model:
// document_version    String?  @db.VarChar(20) @default("1.0")
// is_digital          Boolean? @default(true)
// template_id         String?  @db.VarChar(100)
// form_data           Json?
// attachments         Json?    @default("[]")
// digital_signatures  Json?    @default("[]")
// revision_history    Json?    @default("[]")
// atp_document_attachments atp_document_attachments[]